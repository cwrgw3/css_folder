<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Club_Detail.css">
    <!-- slick -->
    <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
  />
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
        <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
        var firebaseConfig = {
          apiKey: "AIzaSyCrFuy6g93AKQUWW_mWDI0OK_As0X386io",
          authDomain: "oryangcompany.firebaseapp.com",
          projectId: "oryangcompany",
          storageBucket: "oryangcompany.appspot.com",
          messagingSenderId: "39452497785",
          appId: "1:39452497785:web:79ccc25b73be2f819781a8"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body>
    <div class="head-bar-section">
        <a href="#"><img class="logo" src="https://firebasestorage.googleapis.com/v0/b/oryangcompany.appspot.com/o/1.png?alt=media&token=06f5bd93-afa6-44d5-bce3-77d6e6bb835b&_gl=1*1pykbqg*_ga*OTEyMjg3NjQwLjE2OTc4NDkwNDk.*_ga_CW55HF8NVT*MTY5Nzg2Mjc2OC40LjEuMTY5Nzg2OTQ4NS4xNC4wLjA"></a>
        <a href="#"><p class="logoname">오량 주식 컴퍼니</p></a>
        <input type="text" class="search-bar">
        <div class="user-convein">
          <button type="submit" class="head-bar search-button" ></button>
          <button type="button" class="head-bar favorite-button"></button>
          <button type="button" class="head-bar alarm-button"></button>
          <a href="#"><button type="button" class="head-bar profile-button"></button></a>
        </div> 
    </div>
    
    <div class="menu-bar-section">
        <a href="#"><p class="menu">소식</p> </a>
        <a href="#"><p class="menu">거래</p> </a>
        <a href="#"><p class="menu" style="color: #0060FF;">동아리 소개</p> </a>
        <a href="#"><p class="menu">경매</p> </a>
        <a href="#"><p class="menu">채팅</p> </a>
    </div>


    <div class="container">
        <div class="mt-1">
            <div class="photo"><img id="club_image" src=""></div>
            <p class="dongari-title"></p>
            <p class="dongari-exple"></p>
        </div>
        <div class="mt-2">
            <p class="cg-title">추구방향성</p>
            <p class="cg-exple"></p>
        </div>
        
        <div class="mt-3">
            <p class="sg-title">실적규모</p>
            <div class="sg-container">    
                <div class="day-selc">
                    <a class="day-over" id="before-over"></a>
                    <p class="day-main"></p>
                    <a class="day-over" id="next-over"></a>
                </div>
                <div class="sg-box-container">
                    <iframe id="performance_frame" src="/Club/Club_Performance_Scale.html?id=Finder&year=2023" scrolling="no" width="875" height="400" style="border:none;"></iframe>
                </div>
            </div>
           <div class="sg-sum-box">
                <p class="sg-sum"></p>
            </div>        
        </div>
        <div class="mt-4">
            <p class="act-title">활동</p>
            <div class="act-years" style="background-color: #0060FF;">
                <p class="act-years-p">2023</p>
            </div>
            <div class="act-years" style="background-color: #6BA3FF;">
                <p  class="act-years-p">2022</p>
            </div>
            <div class="act-container">
                <!-- Slider main container -->
                <div class="swiper">
                    <!-- Additional required wrapper -->
                    <div class="swiper-wrapper">
                    <!-- Slides -->
                    </div>
                    <!-- If we need pagination -->
                    <div class="swiper-pagination"></div>
                
                    <!-- If we need navigation buttons -->
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                
                    <!-- If we need scrollbar -->
                    <div></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const db = firebase.firestore();
        var query_string = new URLSearchParams(window.location.search);
        var year = query_string.get('scale_year')
        $('.day-main').html(year+'년')
        document.getElementById("before-over").href = '/Club/Club_Detail.html?id='+query_string.get('id')+'&scale_year='+(Number(query_string.get('scale_year'))-1)+'&performance_year='+query_string.get('performance_year');        
        document.getElementById("next-over").href = '/Club/Club_Detail.html?id='+query_string.get('id')+'&scale_year='+(Number(query_string.get('scale_year'))+1)+'&performance_year='+query_string.get('performance_year');
        document.getElementById("before-over").innerText = (Number(year-1))+'년';        
        document.getElementById("next-over").innerText = (Number(year)+1)+'년';
        document.getElementById("performance_frame").src='/Club/Club_Performance_Scale.html?id='+query_string.get('id')+'&scale_year='+query_string.get('scale_year')+'&performance_year='+query_string.get('performance_year')+'/';
        db.collection('club').doc(query_string.get('id')).get().then((result)=>{
            console.log(result);
            document.getElementById("club_image").src = result.data().url;
            $('.dongari-title').html(result.data().club_name)
            $('.dongari-exple').html(result.data().long_content)
            $('.cg-exple').html(result.data().purse)
        })
        db.collection('club').doc(query_string.get('id')).collection('performance_' + year).get().then((result)=>{
            var sum = 0;
            result.forEach((doc)=>{
                sum = Number(sum) + Number(doc.data().performance_scale);
            })
            $('.sg-sum').html(sum+'원')
        })
    </script>
    <script>
        const swiper = new Swiper('.swiper', {
            // Optional parameters
            loop: true,

            // If we need pagination
            pagination: {
                el: '.swiper-pagination',
            },

            // Navigation arrows
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });
    </script>
    <script>
        db.collection('club').get().then((result)=>{
            result.forEach((doc)=>{
            console.log(doc.data())
            var temp = `<div class="swiper-slide"><div class="act-whole-box">
                <div class="act-option-box">
                    <div class="act-photo-box">
                        <img src="${doc.data().url}" alt="사진" class="act-photo">
                    </div>
                    <p class="act-name">대회</p>
                    <p class="act-explain">이 대회는 어쩌구저쩌구
                        대전시에서 이번에 열리는 대회입니다dddd</p>
                </div></div>
        </div>`;
            $('.swiper-wrapper').append(temp)
            })
        })
    </script>
</body>
</html>
